ATTINY85-8MHZ/////////////////////////////////////////////////////////////////////////////

LDI R16,(1<<SE)|(1<<SM1)
OUT MCUCR,R16

LDI R16,0b00001011
OUT PRR,R16

START:
ldi r16,199 ; TOP OF COUNTER FOR FREQ 40KHZ
out OCR0A,R16

LDI R16,49 ; DUTYCYCLE FRACTION OF OCR0A
OUT OCR0B,R16

LDI R16,(1<<COM0B1)|(1<<WGM01)|(1<<WGM00) ;Clear OC0B on Compare Match, FAST PWM MODE OCR0A TOP
OUT TCCR0A,R16

LDI R16,(1<<WGM02)|(1<<CS00) ; NO PRESCALING
OUT TCCR0B,R16

CBI PORTB,1

ldi r20,0b00000010

irsend:
ldi zl,low(photo<<1)
ldi zh,high(photo<<1)

loop1:
lpm r24,z+
lpm r25,z+
cpi r25,0
breq telos
sbiw r25:r24,2
nop
nop
in r16,DDRB
eor r16,r20
out DDRB,r16 

loop2:
nop
nop
nop
nop
sbiw r25:r24,1
brne loop2

rjmp loop1

telos:
cbi DDRB,1
SLEEP

photo: .dW 2400,600, 1200,600, 600,600, 1200,600, 1200,600, 600,600, 1200,600, 600,600, 600,600, 1200,600, 600,600, 
			1200,600, 1200,600, 1200,600, 600,600, 600,600, 600,600, 1200,600, 1200,600, 1200,600, 1200,40000,2400,600, 
			1200,600, 600,600, 1200,600, 1200,600, 600,600, 1200,600, 600,600, 600,600, 1200,600, 600,600, 1200,600, 
			1200,600, 1200,600, 600,600, 600,600, 600,600, 1200,600, 1200,600, 1200,600, 1200,600,40000,2400,600,
			 1200,600, 600,600, 1200,600, 1200,600, 600,600, 1200,600, 600,600, 600,600, 1200,600, 600,600, 1200,600, 
			 1200,600, 1200,600, 600,600, 600,600, 600,600, 1200,600, 1200,600, 1200,600, 1200,600,0
video: .dW 2400,600, 1200,600, 600,600, 1200,600, 1200,600, 600,600, 1200,600, 600,600, 600,600, 1200,600, 600,600, 
			1200,600, 1200,600, 1200,600, 1200,600,600,600,600,600,1200,600,600,600,600,600,600,40000,2400,600,1200,
			600, 600,600, 1200,600, 1200,600, 600,600, 1200,600, 600,600, 600,600, 1200,600, 600,600, 1200,600, 1200,
			600, 1200,600,1200,600,600,600,600,600,1200,600,600,600,600,600,600,40000,2400,600,1200,600, 600,600, 
			1200,600, 1200,600, 600,600, 1200,600, 600,600, 600,600, 1200,600, 600,600, 1200,600, 1200,600, 1200,
			600,1200,600,600,600,600,600,1200,600,600,600,600,600,600,0

